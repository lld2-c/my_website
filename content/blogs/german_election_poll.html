---
categories:
- ""
- ""
date: "2017-10-31T22:26:09-05:00"
description: Lorem Etiam Nullam
draft: false
#image: german_election.jpeg
keywords: ""
slug: magna
title: German election poll 2021 prediction
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<div id="opinion-polls-for-the-2021-german-elections" class="section level1">
<h1>Opinion polls for the 2021 German elections</h1>
<p>The list of the opinion polls since Jan 2021 can be found at <a href="https://en.wikipedia.org/wiki/Opinion_polling_for_the_2021_German_federal_election">Wikipedia</a> and the graph is based on the scraped data from the Wikipedia page.</p>
<pre class="r"><code>#visualize the dataset
glimpse(german_election_polls)</code></pre>
<pre><code>## Rows: 230
## Columns: 16
## $ polling_firm   &lt;chr&gt; &quot;YouGov&quot;, &quot;INSA&quot;, &quot;GMS&quot;, &quot;Forsa&quot;, &quot;INSA&quot;, &quot;Forschungsgr…
## $ fieldwork_date &lt;chr&gt; &quot;9–14 Sep 2021&quot;, &quot;10–13 Sep 2021&quot;, &quot;8–13 Sep 2021&quot;, &quot;7–…
## $ samplesize     &lt;chr&gt; &quot;1,816&quot;, &quot;2,062&quot;, &quot;1,003&quot;, &quot;2,501&quot;, &quot;1,152&quot;, &quot;1,281&quot;, &quot;…
## $ abs            &lt;chr&gt; &quot;–&quot;, &quot;–&quot;, &quot;–&quot;, &quot;25&quot;, &quot;–&quot;, &quot;25&quot;, &quot;–&quot;, &quot;–&quot;, &quot;–&quot;, &quot;–&quot;, &quot;–&quot;…
## $ union          &lt;dbl&gt; 20.0, 20.5, 23.0, 21.0, 20.0, 22.0, 21.0, 19.0, 23.0, 2…
## $ spd            &lt;dbl&gt; 25, 26, 25, 25, 26, 25, 25, 28, 25, 26, 27, 26, 25, 25,…
## $ af_d           &lt;dbl&gt; 11.0, 11.5, 11.0, 11.0, 11.0, 11.0, 12.0, 11.0, 11.0, 1…
## $ fdp            &lt;dbl&gt; 10.0, 12.5, 13.0, 11.0, 13.0, 11.0, 12.0, 12.0, 11.0, 1…
## $ linke          &lt;dbl&gt; 8.0, 6.5, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0, …
## $ grune          &lt;dbl&gt; 15.0, 15.0, 16.0, 17.0, 15.0, 17.0, 17.0, 14.0, 17.0, 1…
## $ fw             &lt;chr&gt; &quot;3&quot;, &quot;–&quot;, &quot;–&quot;, &quot;3&quot;, &quot;–&quot;, &quot;3&quot;, &quot;–&quot;, &quot;–&quot;, &quot;–&quot;, &quot;–&quot;, &quot;–&quot;, …
## $ others         &lt;chr&gt; &quot;7&quot;, &quot;8&quot;, &quot;6&quot;, &quot;6&quot;, &quot;9&quot;, &quot;5&quot;, &quot;7&quot;, &quot;10&quot;, &quot;7&quot;, &quot;10&quot;, &quot;6&quot;…
## $ lead           &lt;chr&gt; &quot;5&quot;, &quot;5.5&quot;, &quot;2&quot;, &quot;4&quot;, &quot;6&quot;, &quot;3&quot;, &quot;4&quot;, &quot;9&quot;, &quot;2&quot;, &quot;5&quot;, &quot;2&quot;…
## $ end_date       &lt;date&gt; 2021-09-14, 2021-09-13, 2021-09-13, 2021-09-13, 2021-0…
## $ month          &lt;dbl&gt; 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9…
## $ week           &lt;dbl&gt; 37, 37, 37, 37, 36, 36, 36, 36, 36, 36, 36, 36, 36, 36,…</code></pre>
<p><code>german_election_polls</code> is a dataframe where the results from German election polling result is gathered from different polling firms. Some of the important variables are explained as below.</p>
<ul>
<li><code>samplesize</code> refers to the number of potential voters.</li>
<li><code>union</code> refers to the voters in the <code>samplesize</code> who supports CDU/CSU – Christian Democrats</li>
<li><code>spd</code> refers to the voters in the <code>samplesize</code> who supports SPD – Social Democrats</li>
<li><code>af_d</code> refers to the voters in the <code>samplesize</code> who supports AfD – Far-right nationalists</li>
<li><code>fdp</code> refers to the voters in the <code>samplesize</code> who supports FDP – Liberals</li>
<li><code>linke</code> refers to the voters in the <code>samplesize</code> who supports Die Linke – The Left</li>
<li><code>grune</code> refers to the voters in the <code>samplesize</code> who supports Die Grünen – Greens</li>
<li><code>end_date</code> refers to the date when the result of the opinion poll enters the table and in the analysis below we will use this variable as the data input for x-axis.</li>
</ul>
<p>The dataframe needs further transformation, e.g., <code>samplesize</code> is a character instead of a double, <code>union</code> does not represent a percentage or rate but instead it represents the rate*100. Therefore, with further cleaning performed, the cleaned dataset <code>election_data</code> looks like the following.</p>
<pre class="r"><code>glimpse(election_data)</code></pre>
<pre><code>## Rows: 131
## Columns: 27
## Groups: end_date [131]
## $ samplesize           &lt;dbl&gt; 1816, 2062, 1152, 1281, 1901, 1208, 2052, 1427, 1…
## $ union                &lt;dbl&gt; 20.0, 20.5, 20.0, 22.0, 21.0, 19.0, 20.5, 20.0, 2…
## $ spd                  &lt;dbl&gt; 25, 26, 26, 25, 25, 28, 26, 25, 25, 25, 27, 25, 2…
## $ af_d                 &lt;dbl&gt; 11.0, 11.5, 11.0, 11.0, 12.0, 11.0, 11.0, 12.0, 1…
## $ fdp                  &lt;dbl&gt; 10.0, 12.5, 13.0, 11.0, 12.0, 12.0, 12.5, 13.0, 1…
## $ linke                &lt;dbl&gt; 8.0, 6.5, 6.0, 6.0, 6.0, 6.0, 6.5, 7.0, 7.0, 6.0,…
## $ grune                &lt;dbl&gt; 15.0, 15.0, 15.0, 17.0, 17.0, 14.0, 15.5, 16.0, 1…
## $ end_date             &lt;date&gt; 2021-09-14, 2021-09-13, 2021-09-10, 2021-09-09, …
## $ number_of_vote_union &lt;dbl&gt; 363.20, 422.71, 230.40, 281.82, 399.21, 229.52, 4…
## $ number_of_vote_spd   &lt;dbl&gt; 454.00, 536.12, 299.52, 320.25, 475.25, 338.24, 5…
## $ number_of_vote_af_d  &lt;dbl&gt; 199.76, 237.13, 126.72, 140.91, 228.12, 132.88, 2…
## $ number_of_vote_fdp   &lt;dbl&gt; 181.600, 257.750, 149.760, 140.910, 228.120, 144.…
## $ number_of_vote_linke &lt;dbl&gt; 145.28, 134.03, 69.12, 76.86, 114.06, 72.48, 133.…
## $ number_of_vote_grune &lt;dbl&gt; 272.400, 309.300, 172.800, 217.770, 323.170, 169.…
## $ totalsample          &lt;dbl&gt; 1816, 5566, 1152, 1281, 4859, 11290, 5561, 1427, …
## $ sum_vote_union       &lt;dbl&gt; 363.20, 1178.61, 230.40, 281.82, 1070.71, 2548.38…
## $ sum_vote_spd         &lt;dbl&gt; 454.00, 1412.12, 299.52, 320.25, 1256.91, 2858.74…
## $ sum_vote_af_d        &lt;dbl&gt; 199.76, 622.57, 126.72, 140.91, 570.50, 1241.90, …
## $ sum_vote_fdp         &lt;dbl&gt; 181.600, 663.250, 149.760, 140.910, 517.630, 1253…
## $ sum_vote_linke       &lt;dbl&gt; 145.28, 344.27, 69.12, 76.86, 291.54, 677.40, 343…
## $ sum_vote_grune       &lt;dbl&gt; 272.400, 894.950, 172.800, 217.770, 773.160, 1883…
## $ average_rate_union   &lt;dbl&gt; 0.2000000, 0.2117517, 0.2000000, 0.2200000, 0.220…
## $ average_rate_spd     &lt;dbl&gt; 0.2500000, 0.2537046, 0.2600000, 0.2500000, 0.258…
## $ average_rate_af_d    &lt;dbl&gt; 0.1100000, 0.1118523, 0.1100000, 0.1100000, 0.117…
## $ average_rate_fdp     &lt;dbl&gt; 0.1000000, 0.1191610, 0.1300000, 0.1100000, 0.106…
## $ average_rate_linke   &lt;dbl&gt; 0.08000000, 0.06185232, 0.06000000, 0.06000000, 0…
## $ average_rate_grune   &lt;dbl&gt; 0.1500000, 0.1607887, 0.1500000, 0.1700000, 0.159…</code></pre>
<p>To make a the plot representative of periodic trend, I applied 14-day rolling average for the poll result in each of 6 parties.</p>
<pre class="r"><code>election_data = na.omit(election_data)

roll_mean_union = zoo::rollmean(election_data$average_rate_union,k = 14, fill = NA, align = &quot;left&quot;)

roll_mean_spd = zoo::rollmean(election_data$average_rate_spd,k = 14, fill = NA, align = &quot;left&quot;)

roll_mean_af_d = zoo::rollmean(election_data$average_rate_af_d,k = 14, fill = NA, align = &quot;left&quot;)

roll_mean_fdp = zoo::rollmean(election_data$average_rate_fdp,k = 14, fill = NA, align = &quot;left&quot;)

roll_mean_linke = zoo::rollmean(election_data$average_rate_linke,k = 14, fill = NA, align = &quot;left&quot;)

roll_mean_grune= zoo::rollmean(election_data$average_rate_grune,k = 14, fill = NA, align = &quot;left&quot;)
election_data = cbind(election_data,
                      roll_mean_union=roll_mean_union,
                      roll_mean_spd=roll_mean_spd,
                      roll_mean_af_d=roll_mean_af_d,
                      roll_mean_fdp=roll_mean_fdp,
                      roll_mean_linke=roll_mean_linke,
                      roll_mean_grune=roll_mean_grune)</code></pre>
<p>The new dataset <code>election_data</code> is glimpsed as below.</p>
<pre class="r"><code>glimpse(election_data)</code></pre>
<pre><code>## Rows: 130
## Columns: 33
## Groups: end_date [130]
## $ samplesize           &lt;dbl&gt; 1816, 2062, 1152, 1281, 1901, 1208, 2052, 1427, 1…
## $ union                &lt;dbl&gt; 20.0, 20.5, 20.0, 22.0, 21.0, 19.0, 20.5, 20.0, 2…
## $ spd                  &lt;dbl&gt; 25, 26, 26, 25, 25, 28, 26, 25, 25, 25, 27, 25, 2…
## $ af_d                 &lt;dbl&gt; 11.0, 11.5, 11.0, 11.0, 12.0, 11.0, 11.0, 12.0, 1…
## $ fdp                  &lt;dbl&gt; 10.0, 12.5, 13.0, 11.0, 12.0, 12.0, 12.5, 13.0, 1…
## $ linke                &lt;dbl&gt; 8.0, 6.5, 6.0, 6.0, 6.0, 6.0, 6.5, 7.0, 7.0, 6.0,…
## $ grune                &lt;dbl&gt; 15.0, 15.0, 15.0, 17.0, 17.0, 14.0, 15.5, 16.0, 1…
## $ end_date             &lt;date&gt; 2021-09-14, 2021-09-13, 2021-09-10, 2021-09-09, …
## $ number_of_vote_union &lt;dbl&gt; 363.20, 422.71, 230.40, 281.82, 399.21, 229.52, 4…
## $ number_of_vote_spd   &lt;dbl&gt; 454.00, 536.12, 299.52, 320.25, 475.25, 338.24, 5…
## $ number_of_vote_af_d  &lt;dbl&gt; 199.76, 237.13, 126.72, 140.91, 228.12, 132.88, 2…
## $ number_of_vote_fdp   &lt;dbl&gt; 181.600, 257.750, 149.760, 140.910, 228.120, 144.…
## $ number_of_vote_linke &lt;dbl&gt; 145.28, 134.03, 69.12, 76.86, 114.06, 72.48, 133.…
## $ number_of_vote_grune &lt;dbl&gt; 272.400, 309.300, 172.800, 217.770, 323.170, 169.…
## $ totalsample          &lt;dbl&gt; 1816, 5566, 1152, 1281, 4859, 11290, 5561, 1427, …
## $ sum_vote_union       &lt;dbl&gt; 363.20, 1178.61, 230.40, 281.82, 1070.71, 2548.38…
## $ sum_vote_spd         &lt;dbl&gt; 454.00, 1412.12, 299.52, 320.25, 1256.91, 2858.74…
## $ sum_vote_af_d        &lt;dbl&gt; 199.76, 622.57, 126.72, 140.91, 570.50, 1241.90, …
## $ sum_vote_fdp         &lt;dbl&gt; 181.600, 663.250, 149.760, 140.910, 517.630, 1253…
## $ sum_vote_linke       &lt;dbl&gt; 145.28, 344.27, 69.12, 76.86, 291.54, 677.40, 343…
## $ sum_vote_grune       &lt;dbl&gt; 272.400, 894.950, 172.800, 217.770, 773.160, 1883…
## $ average_rate_union   &lt;dbl&gt; 0.2000000, 0.2117517, 0.2000000, 0.2200000, 0.220…
## $ average_rate_spd     &lt;dbl&gt; 0.2500000, 0.2537046, 0.2600000, 0.2500000, 0.258…
## $ average_rate_af_d    &lt;dbl&gt; 0.1100000, 0.1118523, 0.1100000, 0.1100000, 0.117…
## $ average_rate_fdp     &lt;dbl&gt; 0.1000000, 0.1191610, 0.1300000, 0.1100000, 0.106…
## $ average_rate_linke   &lt;dbl&gt; 0.08000000, 0.06185232, 0.06000000, 0.06000000, 0…
## $ average_rate_grune   &lt;dbl&gt; 0.1500000, 0.1607887, 0.1500000, 0.1700000, 0.159…
## $ roll_mean_union      &lt;dbl&gt; 0.2102920, 0.2129890, 0.2135782, 0.2153867, 0.215…
## $ roll_mean_spd        &lt;dbl&gt; 0.2515135, 0.2500049, 0.2475974, 0.2457889, 0.244…
## $ roll_mean_af_d       &lt;dbl&gt; 0.1112237, 0.1110651, 0.1116471, 0.1116471, 0.111…
## $ roll_mean_fdp        &lt;dbl&gt; 0.1182802, 0.1184387, 0.1184987, 0.1181188, 0.119…
## $ roll_mean_linke      &lt;dbl&gt; 0.06494051, 0.06351194, 0.06409392, 0.06514258, 0…
## $ roll_mean_grune      &lt;dbl&gt; 0.1654072, 0.1680272, 0.1693995, 0.1708736, 0.171…</code></pre>
<p>Now that we have finished data cleansing and calculation for relevant variables, we can plot the data using the powerful <code>ggplot</code>.</p>
<pre class="r"><code>#plot the graph
election_data %&gt;% 
  ggplot(aes(x = end_date))+
  
  #add the scatter plot for each party
  geom_point(aes(y = average_rate_union), alpha=0.3, size=1) + 
  geom_point(aes(y = average_rate_spd), color=&quot;red3&quot;, alpha=0.3, size=1) +
  geom_point(aes(y = average_rate_af_d), color=&quot;midnightblue&quot;, alpha=0.3, size=1)+
  geom_point(aes(y = average_rate_fdp), color=&quot;orange1&quot;, alpha=0.3, size=1)+
  geom_point(aes(y = average_rate_linke), color=&quot;mediumvioletred&quot;, alpha=0.3, size=1)+
  geom_point(aes(y = average_rate_grune), color=&quot;green&quot;, alpha=0.3, size=1)+
  
  #add the line plot for each party
  geom_line(aes(y = roll_mean_union, color=&quot;CDU/CSU&quot;), size=1) + 
  geom_line(aes(y = roll_mean_spd, color=&quot;SPD&quot;),size=1) +
  geom_line(aes(y = roll_mean_af_d, color=&quot;AfD&quot;),size=1)+
  geom_line(aes(y = roll_mean_fdp, color=&quot;FDP&quot;),size=1)+
  geom_line(aes(y = roll_mean_linke, color=&quot;Linke&quot;),size=1)+
  geom_line(aes(y = roll_mean_grune,  color=&quot;Grune&quot;),size=1)+
  
  #add the titles, subtitles, legends on the x- and y-axis
  labs(title = &quot;German Election Poll&quot;, 
       x=&quot;Date&quot;, y=&quot;Percentage of vote&quot;)+
  theme(plot.title= element_text(size=10, face=&quot;bold&quot;, 
                                 family = &quot;Tahoma&quot;))+
  theme(plot.subtitle= element_text(size=8, family = &quot;Tahoma&quot;))+
  
  #customise the scales of x- and y-axis
  scale_y_continuous(labels = scales::percent)+
  scale_x_date(date_breaks = &quot;2 month&quot;, 
               labels = date_format(&quot;%b-%Y&quot;), 
               minor_breaks = &quot;1 week&quot;)+
  
  #add the variable legends
  scale_color_manual(values = colors, name = &quot;Parties&quot;)+
  
  #customise the panel aethetics
  theme(panel.background = element_rect(fill = &quot;white&quot;, 
                                        colour = &quot;grey50&quot;))+
  #add referencing lines
  geom_hline(yintercept=0.05, linetype=&quot;dashed&quot;, size = 0.2)+
  geom_hline(yintercept=0.15, linetype=&quot;dashed&quot;, size = 0.2)+
  geom_hline(yintercept=0.25, linetype=&quot;dashed&quot;, size = 0.2)+
  geom_hline(yintercept=0.35, linetype=&quot;dashed&quot;, size = 0.2)+
  geom_hline(yintercept=0.45, linetype=&quot;dashed&quot;, size = 0.2)+
  
  #draw dashed line for electoral threshold
  annotate(&quot;text&quot;, x = as.Date(&quot;2021-01-25&quot;),y = 0.04, 
           label = &quot;electoral threshold&quot;,
           color = &#39;grey60&#39;,size = 5)</code></pre>
<p><img src="/blogs/german_election_poll_files/figure-html/unnamed-chunk-8-1.png" width="960" /></p>
<p>We can see from the graph that the CDU, the party where Angela Merkel belongs to, was leading until late August, 2021. Based on the plot, SPD has taken over CDU and it seems to be gaining more and more support. This is probably because Scholz, the candidate from SPD, is considered to have the best leadership skills compared to other candidates. Statistics showed that a quarter of of voters voted for SPD in the belief of Scholz’s leadership qualities.</p>
<p>The Greens also gained significant support over the most time of the year. This is probably due to the fact that they’re considered to have the greatest competence in environmental and climate policy. And one in third German voters would consider environmental protection and climate change to be the most pressing topic for the next government.</p>
<p>To visualize each of the 6 parties’ re presentative candidate, we can add the following to the graph to make it clear of the leading candidate’s performance.</p>
<p><img src="/blogs/german_election_poll_files/figure-html/unnamed-chunk-10-1.png" width="960" /></p>
</div>
